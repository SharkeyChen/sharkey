{"version":3,"sources":["webpack:///./src/views/GuessDraw.vue?dc9c","webpack:///./src/views/GuessDraw.vue?3ed5","webpack:///src/views/GuessDraw.vue","webpack:///./src/views/GuessDraw.vue?906b","webpack:///./src/views/GuessDraw.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","staticClass","_v","on","changeColor","model","value","callback","$$v","drawColor","expression","attrs","changeLineWidth","drawLineWidth","ref","draw","clearCanvas","clickReady","_l","record","index","key","_s","username","content","directives","name","rawName","domProps","$event","type","indexOf","_k","keyCode","submitWord","target","composing","guessWord","playerList","scopedSlots","_u","fn","scope","stcImg","row","profile","stateFormat","_e","staticRenderFns","component"],"mappings":"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","file":"js/chunk-01a041e6.0c04845a.js","sourcesContent":["import mod from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./GuessDraw.vue?vue&type=style&index=0&id=3e39a147&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/_mini-css-extract-plugin@0.9.0@mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/_vue-loader@15.9.2@vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./GuessDraw.vue?vue&type=style&index=0&id=3e39a147&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"float\":\"left\"}},[_c('el-card',{staticClass:\"box-card\"})],1),_c('div',{staticClass:\"boardleft\"},[_c('div',{staticClass:\"drawBoard\"},[_c('div',{staticClass:\"canvasSetting\"},[_c('span',[_vm._v(\"选择颜色\")]),_c('br'),_c('el-color-picker',{on:{\"change\":_vm.changeColor},model:{value:(_vm.drawColor),callback:function ($$v) {_vm.drawColor=$$v},expression:\"drawColor\"}}),_c('br'),_c('span',[_vm._v(\"粗细\")]),_c('el-slider',{attrs:{\"step\":1,\"min\":1,\"max\":10},on:{\"change\":_vm.changeLineWidth},model:{value:(_vm.drawLineWidth),callback:function ($$v) {_vm.drawLineWidth=$$v},expression:\"drawLineWidth\"}}),_c('br')],1),_c('canvas',{ref:\"canvas\",attrs:{\"id\":\"drawBoard\",\"width\":\"1000\",\"height\":\"500\"},on:{\"click\":_vm.draw}}),_c('br'),_c('el-button',{staticClass:\"clearButton\",on:{\"click\":_vm.clearCanvas}},[_vm._v(\"clear\")]),_c('el-button',{on:{\"click\":_vm.clickReady}},[_vm._v(\"准备\")])],1)]),_c('div',{staticClass:\"boardright\"},[_c('div',{staticClass:\"totalBoard\",attrs:{\"id\":\"totalBoard\"}},[_vm._l((_vm.chatRecords),function(record,index){return _c('div',{key:index,staticClass:\"record\"},[_c('span',{staticClass:\"blue\"},[_vm._v(_vm._s(record.username))]),_vm._v(\":\"+_vm._s(record.content)+\" \")])}),_c('div',{staticClass:\"blank\"})],2),_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.guessWord),expression:\"guessWord\"}],staticClass:\"inputContent\",attrs:{\"type\":\"text\",\"placeholder\":\"这里输入内容\",\"component\":\"inputBoard\"},domProps:{\"value\":(_vm.guessWord)},on:{\"keydown\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.submitWord($event)},\"input\":function($event){if($event.target.composing){ return; }_vm.guessWord=$event.target.value}}}),_c('el-button',{staticClass:\"submitButton\",attrs:{\"type\":\"primary\",\"component\":\"inputBoard\"},on:{\"click\":_vm.submitWord}},[_vm._v(\"发送\")])],1)]),_c('div',[(_vm.playerList)?_c('el-table',{attrs:{\"data\":_vm.playerList}},[_c('el-table-column',{attrs:{\"label\":\"头像\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-avatar',{key:_vm.stcImg + scope.row.profile,attrs:{\"fit\":'fill',\"src\":_vm.stcImg + scope.row.profile}})]}}],null,false,2111346685)}),_c('el-table-column',{attrs:{\"prop\":\"nickname\",\"label\":\"昵称\"}}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"状态\",\"formatter\":_vm.stateFormat}})],1):_vm._e()],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div style=\"float: left\">\r\n            <el-card class=\"box-card\">\r\n            </el-card>\r\n        </div>\r\n        <div class=\"boardleft\">\r\n            <div class=\"drawBoard\">\r\n                <div class=\"canvasSetting\">\r\n                    <span>选择颜色</span>\r\n                    <br/>\r\n                    <el-color-picker v-model=\"drawColor\" @change=\"changeColor\"></el-color-picker>\r\n                    <br/>\r\n                    <span>粗细</span>\r\n                    <el-slider v-model=\"drawLineWidth\" @change=\"changeLineWidth\" :step=\"1\" :min=\"1\" :max=\"10\">\r\n                    </el-slider>\r\n                    <br/>\r\n                </div>\r\n                <canvas id=\"drawBoard\" ref=\"canvas\" width=\"1000\" height=\"500\" @click=\"draw\"></canvas>\r\n                <br/>\r\n                <el-button class=\"clearButton\" @click=\"clearCanvas\">clear</el-button>\r\n                <el-button @click=\"clickReady\">准备</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"boardright\">\r\n            <div class=\"totalBoard\" id=\"totalBoard\">\r\n                <div v-for=\"(record,index) in chatRecords\" :key=\"index\" class=\"record\">\r\n                    <span class=\"blue\">{{record.username}}</span>:{{record.content}}\r\n                </div>\r\n                <div class=\"blank\"></div>\r\n            </div>\r\n            <div>\r\n                <input class='inputContent' type=\"text\" v-model=\"guessWord\" placeholder=\"这里输入内容\" @keydown.enter=\"submitWord\" component=\"inputBoard\"/>\r\n                <el-button type=\"primary\" class=\"submitButton\" @click=\"submitWord\" component=\"inputBoard\" >发送</el-button>\r\n            </div>\r\n\r\n        </div>\r\n        <div>\r\n            <el-table :data=\"playerList\" v-if=\"playerList\">\r\n                <el-table-column label=\"头像\">\r\n                    <template slot-scope=\"scope\">\r\n                        <el-avatar :fit=\"'fill'\" :src=\"stcImg + scope.row.profile\" :key=\"stcImg + scope.row.profile\"></el-avatar>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop=\"nickname\" label=\"昵称\"></el-table-column>\r\n                <el-table-column prop=\"status\" label=\"状态\" :formatter=\"stateFormat\"></el-table-column>\r\n            </el-table>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        name: \"GuessDraw\",\r\n        data(){\r\n            return{\r\n                drawColor: '#000000',\r\n                drawLineWidth: 1,\r\n                lineEndType: '默认',\r\n                param:{},\r\n                roomid:'',\r\n                user:{},\r\n                canvas:{},\r\n                ctx:{},\r\n                stage_info:{},\r\n                path:{},\r\n                isDraw:false,\r\n                playerList:[],\r\n                stcImg:this.$StaticImage,\r\n                drawAble:false,\r\n                keyword:'',\r\n                chatRecords:[\r\n                ],\r\n                guessWord:'',\r\n            }\r\n        },\r\n        mounted(){\r\n            this.init()\r\n            this.getUserInfo()\r\n\r\n        },\r\n        methods:{\r\n            init(){\r\n                this.canvas = this.$refs.canvas\r\n                console.log(this.ctx + \"YES\")\r\n                this.ctx = this.canvas.getContext('2d');\r\n                console.log(this.ctx + \"NO\")\r\n                this.stage_info = this.canvas.getBoundingClientRect()\r\n                this.path = {\r\n                    beginX: 0,\r\n                    beginY: 0,\r\n                    endX: 0,\r\n                    endY: 0,},\r\n                this.isDraw = false\r\n                this.roomid = window.location.href.split('=')[1]\r\n                this.draw()\r\n            },\r\n\r\n            stateFormat(row, column){\r\n                if(row.status == 0){\r\n                    return '未准备'\r\n                }else if(row.status == 1){\r\n                    return '已准备'\r\n                }else if(row.status == 2){\r\n                    return '正在画画'\r\n                }else if(row.status == 3){\r\n                    return '正在猜'\r\n                }\r\n            },\r\n\r\n            clickReady(){\r\n                this.setParam(1002, {\"rid\" : this.roomid, \"id\": this.user.username})\r\n                this.$ws.dispatch(\"WEBSOCKET_SEND\", JSON.stringify(this.param))\r\n            },\r\n\r\n            submitWord(){\r\n                if(this.guessWord && this.guessWord != '') {\r\n                    let data = {\r\n                        'rid': this.roomid,\r\n                        'username': this.user.username,\r\n                        'content': this.guessWord,\r\n                        'status': 'chat',\r\n                    }\r\n                    this.setParam(1004, data)\r\n                    this.$ws.dispatch(\"WEBSOCKET_SEND\", JSON.stringify(this.param))\r\n                    this.guessWord = ''\r\n                }\r\n            },\r\n\r\n            changeColor(color) {\r\n                if(this.drawAble) {\r\n                    this.ctx.strokeStyle = color;\r\n                    let data = {\r\n                        'rid': this.roomid,\r\n                        'status': 'changeColor',\r\n                        'id': this.user.username,\r\n                        'color': color,\r\n                    }\r\n                    this.setParam(1004, data)\r\n                    this.$ws.dispatch(\"WEBSOCKET_SEND\", JSON.stringify(this.param))\r\n                }\r\n            },\r\n\r\n            changeLineWidth(lineWidth) {\r\n                if(this.drawAble) {\r\n                    this.ctx.lineWidth = lineWidth;\r\n                    let data = {\r\n                        'rid': this.roomid,\r\n                        'status': 'changeLineWidth',\r\n                        'id': this.user.username,\r\n                        'lineWidth': lineWidth\r\n                    }\r\n                    this.setParam(1004, data)\r\n                    this.$ws.dispatch(\"WEBSOCKET_SEND\", JSON.stringify(this.param))\r\n                }\r\n            },\r\n\r\n            clearCanvas(){\r\n                if(this.drawAble) {\r\n                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n                    let data = {\r\n                        'rid': this.roomid,\r\n                        'status': 'clear',\r\n                        'id': this.user.username,\r\n                    }\r\n                    this.setParam(1004, data)\r\n                    this.$ws.dispatch(\"WEBSOCKET_SEND\", JSON.stringify(this.param))\r\n                }\r\n            },\r\n\r\n            draw() {\r\n                let that = this\r\n                that.canvas.onmousedown = function(event){\r\n                    if(that.drawAble == true) {\r\n                        that.ctx.beginPath()\r\n                        that.path.beginX = event.pageX - that.stage_info.left\r\n                        that.path.beginY = event.pageY - that.stage_info.top\r\n                        that.ctx.moveTo(\r\n                            that.path.beginX,\r\n                            that.path.beginY\r\n                        )\r\n                        that.isDraw = true\r\n                        let data = {\r\n                            'rid': that.roomid,\r\n                            'status': 'begin',\r\n                            'id': that.user.username\r\n                        }\r\n                        that.setParam(1004, data)\r\n                        that.$ws.dispatch('WEBSOCKET_SEND', JSON.stringify(that.param))\r\n                    }\r\n                }\r\n                that.canvas.onmousemove = function (event) {\r\n                    if(that.drawAble) {\r\n                        if (that.isDraw) {\r\n                            that.drawing(event)\r\n                        }\r\n                    }\r\n\r\n                }\r\n                that.canvas.onmouseup = function(event) {\r\n                    if (that.drawAble) {\r\n                        that.isDraw = false\r\n                        let data = {\r\n                            'rid': that.roomid,\r\n                            'status': 'end',\r\n                            'id': that.user.username\r\n                        }\r\n                        that.setParam(1004, data)\r\n                        that.$ws.dispatch(\"WEBSOCKET_SEND\", JSON.stringify(that.param))\r\n                    }\r\n                }\r\n            },\r\n\r\n            drawing(e) {\r\n                this.path.endX = e.pageX - this.stage_info.left\r\n                this.path.endY = e.pageY - this.stage_info.top\r\n                this.ctx.lineTo(\r\n                    this.path.endX,\r\n                    this.path.endY\r\n                )\r\n                this.ctx.stroke()\r\n                let data = {\r\n                    'sx':this.path.beginX,\r\n                    'sy':this.path.beginY,\r\n                    'ex':this.path.endX,\r\n                    'ey':this.path.endY,\r\n                    'rid':this.roomid,\r\n                    'status':'drawing',\r\n                    'id':this.user.username\r\n                }\r\n                this.setParam(1004, data)\r\n                this.$ws.dispatch(\"WEBSOCKET_SEND\", JSON.stringify(this.param))\r\n                this.path.beginX = this.path.endX\r\n                this.path.beginY = this.path.endY\r\n            },\r\n\r\n            drawLine(sx,sy,ex,ey){\r\n                this.ctx.moveTo(sx, sy)\r\n                this.ctx.lineTo(ex, ey)\r\n                this.ctx.stroke()\r\n            },\r\n\r\n            getUserInfo(){\r\n                let username = window.sessionStorage.getItem(\"user\")\r\n                if(username == null){\r\n                    window.sessionStorage.removeItem(\"user\")\r\n                    this.$router.push(\"/\")\r\n                    return ;\r\n                }\r\n                let url = \"/user/?username=\" + username\r\n                this.getRequest(url).then(resp => {\r\n                    this.user = resp\r\n                    let data = {\r\n                        \"id\": this.user.username,\r\n                        \"rid\": this.roomid,\r\n                    }\r\n                    this.setParam(1000, data)\r\n                    this.$ws.dispatch('WEBSOCKET_SEND', JSON.stringify(this.param))\r\n                })\r\n            },\r\n\r\n\r\n            setParam(code, data){\r\n                this.param = {}\r\n                this.param.code = code\r\n                for(let i in data){\r\n                    this.param[i] = data[i]\r\n                }\r\n            },\r\n\r\n            isJSON(str){\r\n                if(typeof str == 'string'){\r\n                    try{\r\n                        let obj = JSON.parse(str)\r\n                        if(typeof obj == 'object' && obj){\r\n                            return true\r\n                        }\r\n                        else{\r\n                            return false\r\n                        }\r\n                    }catch (e) {\r\n                        console.log('error：'+str+'!!!'+e);\r\n                        return false;\r\n                    }\r\n                }\r\n                else{\r\n                    return false\r\n                }\r\n            },\r\n\r\n        },\r\n        computed: {\r\n            alertCon(){\r\n                return this.$ws.getters.onEvent('string')\r\n            }\r\n        },\r\n        watch:{\r\n            drawColor(){\r\n                this.draw.changeColor(this.drawColor);\r\n            },\r\n            drawLineWidth(){\r\n                this.draw.changeLineWidth(this.drawLineWidth)\r\n            },\r\n            alertCon: function(a, b){\r\n                if(a != b){\r\n                    console.log(a)\r\n                    if(this.isJSON(a)){\r\n                        let data = JSON.parse(a)\r\n                        if(data.code == 1001){\r\n                            let list = data.players\r\n                            let url = '/user/getUsers'\r\n                            this.postRequest(url, list).then(resp => {\r\n                                this.playerList = resp.data\r\n                                for(let i = 0;i < this.playerList.length;i ++){\r\n                                    this.playerList[i]['status'] = 0\r\n                                }\r\n                            })\r\n                        }\r\n                        else if(data.code == 1002){\r\n                            for(let i = 0;i < this.playerList.length;i ++){\r\n                                if(this.playerList[i].username === data.id){\r\n                                    this.playerList[i].status = 1\r\n                                    this.$set(this.playerList,i , this.playerList[i])\r\n                                }\r\n                                // alert(JSON.stringify(this.playerList))\r\n                            }\r\n                        }\r\n                        else if(data.code == 1003){\r\n                            let painter = data.painter\r\n                            this.keyword = data.keyword\r\n                            if(painter == this.user.username){\r\n                                this.drawAble = true\r\n                            }\r\n                            else{\r\n                                this.drawAble = false\r\n                            }\r\n                            for(let i = 0;i < this.playerList.length;i ++){\r\n                                if(this.playerList[i].username === painter){\r\n                                    this.playerList[i].status = 2\r\n                                }\r\n                                else{\r\n                                    this.playerList[i].status = 3\r\n                                }\r\n                                this.$set(this.playerList,i, this.playerList[i])\r\n                            }\r\n\r\n                        }\r\n                        else if(data.code == 1004) {\r\n                            if(data.id !== this.user.username) {\r\n                                if (data.status === 'begin') {\r\n                                    this.isDraw = true;\r\n                                } else if (data.status === 'end') {\r\n                                    this.isDraw = false;\r\n                                } else if (data.status === 'drawing') {\r\n                                    let sx = data.sx\r\n                                    let sy = data.sy\r\n                                    let ex = data.ex\r\n                                    let ey = data.ey\r\n                                    this.drawLine(sx, sy, ex, ey)\r\n                                } else if(data.status === 'changeColor'){\r\n                                    let color = data.color\r\n                                    this.drawColor = color\r\n                                    this.ctx.strokeStyle = color\r\n                                } else if(data.status === 'changeLineWidth'){\r\n                                    let width = data.lineWidth\r\n                                    this.drawLineWidth = width\r\n                                    this.ctx.lineWidth = width\r\n                                } else if(data.status === 'clear'){\r\n                                    this.ctx.clearRect(0,0, this.canvas.width, this.canvas.height)\r\n                                } else if(data.status === 'chat'){\r\n                                    let chat = {username:data.username}\r\n                                    console.log(JSON.stringify(data))\r\n                                    console.log(this.keyword)\r\n                                    if(data.content === this.keyword){\r\n                                        chat['content'] = '答对了(#^.^#)'\r\n                                    }\r\n                                    else{\r\n                                        chat['content'] = this.keyword\r\n                                    }\r\n                                    this.chatRecords.push(chat)\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        },\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .drawBoard{\r\n        text-align: center;\r\n        margin-top: 10px;\r\n        white-space: nowrap;\r\n    }\r\n    .canvasSetting{\r\n        vertical-align:top;\r\n        text-align: left;\r\n        width: 150px;\r\n        display: inline-block;\r\n    }\r\n    input[type=\"range\"]{\r\n        width: 45%;\r\n    }\r\n    #drawBoard {\r\n        border: 1px solid black;\r\n    }\r\n    .clearButton{\r\n        vertical-align: bottom;\r\n    }\r\n    .totalBoard {\r\n        width: 100%;\r\n        height: 95%;\r\n        text-align: left;\r\n        overflow: auto;\r\n        position: relative;\r\n    }\r\n    .record{\r\n        padding-top: 10px;\r\n        padding-left: 20px;\r\n    }\r\n    .blue{\r\n        color: #409EFF;\r\n    }\r\n    .blank{\r\n        height: 30px;;\r\n    }\r\n\r\n    .boardleft{\r\n        float:left;\r\n        flex: 3;\r\n        border: 1px solid #e5e4e4;\r\n        margin-left: 100px;\r\n    }\r\n    .boardright{\r\n        width: 300px;\r\n        height: 450px;\r\n        float:right;\r\n        margin-right: 100px;\r\n        flex: 1;\r\n        border: 1px solid #e5e4e4;\r\n        border-radius: 5px;\r\n    }\r\n    .inputContent{\r\n        height: 50px;\r\n        width: 100%;\r\n        border: 0px;\r\n        outline:none;\r\n        background-color:transparent;\r\n    }\r\n    .submitButton{\r\n        height: 50px;\r\n        width: 80px;\r\n        float: right;\r\n        border-top-left-radius: 0;\r\n        border-bottom-left-radius: 0;\r\n    }\r\n    .box-card {\r\n        width: 480px;\r\n    }\r\n</style>\r\n","import mod from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./GuessDraw.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../node_modules/_vue-loader@15.9.2@vue-loader/lib/index.js??vue-loader-options!./GuessDraw.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GuessDraw.vue?vue&type=template&id=3e39a147&scoped=true&\"\nimport script from \"./GuessDraw.vue?vue&type=script&lang=js&\"\nexport * from \"./GuessDraw.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GuessDraw.vue?vue&type=style&index=0&id=3e39a147&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/_vue-loader@15.9.2@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e39a147\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}